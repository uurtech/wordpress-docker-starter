(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[49],{220:function(e,t,n){"use strict";var o=n(12),c=n(13),r=n(3),a=n(11),i=n(10),s=n(17).f,l=n(103),u=r.Symbol;if(c&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var m={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new u(e):void 0===e?u():u(e);return""===e&&(m[t]=!0),t};l(p,u);var d=p.prototype=u.prototype;d.constructor=p;var h=d.toString,b="Symbol(test)"==String(u("test")),f=/^Symbol\((.*)\)[^)]+$/;s(d,"description",{configurable:!0,get:function(){var e=i(this)?this.valueOf():this,t=h.call(e);if(a(m,e))return"";var n=b?t.slice(7,-1):t.replace(f,"$1");return""===n?void 0:n}}),o({global:!0,forced:!0},{Symbol:p})}},282:function(e,t,n){var o=n(12),c=n(249).entries;o({target:"Object",stat:!0},{entries:function(e){return c(e)}})},319:function(e,t,n){"use strict";var o=n(12),c=n(188).trim;o({target:"String",proto:!0,forced:n(404)("trim")},{trim:function(){return c(this)}})},320:function(e,t,n){"use strict";var o=n(12),c=n(75).findIndex,r=n(118),a=!0;"findIndex"in[]&&Array(1).findIndex((function(){a=!1})),o({target:"Array",proto:!0,forced:a},{findIndex:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),r("findIndex")},322:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n(7),c=n.n(o),r=(n(170),n(88),n(37),n(53),n(41),n(60),n(49),n(61),n(78)),a=n(85);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=window.location,o=n.pathname,c=n.search,i=Object(a.g)("connectNonce","");return t=s({"wccom-site":Object(a.g)("siteUrl"),"wccom-back":o+c,"wccom-woo-version":Object(a.g)("wcVersion"),"wccom-connect-nonce":i},t),Object(r.addQueryArgs)(e,t)}},404:function(e,t,n){var o=n(6),c=n(189);e.exports=function(e){return o((function(){return!!c[e]()||"​᠎"!="​᠎"[e]()||c[e].name!==e}))}},619:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));n(37),n(53),n(41),n(60),n(49),n(61);var o=n(7),c=n.n(o),r=n(43),a=n.n(r);n(282);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"undefined";return e&&Array.isArray(e)&&e.length?t?e.reduce((function(e,o){return o[t]||(o[t]=n),(e[o[t]]=e[o[t]]||[]).push(o),e}),{}):e:{}},u=function(e,t){return Object.entries(e).reduce((function(e,n){var o=a()(n,1)[0];return s(s({},e),{},c()({},o,t))}),{})}},620:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return _}));var o=n(80),c=n.n(o),r=n(43),a=n.n(r),i=n(44),s=n.n(i),l=n(0),u=(n(319),n(129),n(51),n(209),n(88),n(142),n(41),n(135),n(2)),m=n(132),p=n(5),d=n(85),h=n(145),b=Object(d.g)("dataEndpoints",{countries:{}}).countries;function f(e){var t={};return e.addressLine1.trim().length||(t.addressLine1=Object(u.__)("Please add an address",'woocommerce')),e.countryState.trim().length||(t.countryState=Object(u.__)("Please select a country / region",'woocommerce')),e.city.trim().length||(t.city=Object(u.__)("Please add a city",'woocommerce')),e.postCode.trim().length||(t.postCode=Object(u.__)("Please add a post code",'woocommerce')),t}function _(e){var t=e.getInputProps,n=e.setValue,o=Object(l.useMemo)((function(){return b.reduce((function(e,t){if(!t.states.length)return e.push({key:t.code,label:Object(m.decodeEntities)(t.name)}),e;var n=t.states.map((function(e){return{key:t.code+":"+e.code,label:Object(m.decodeEntities)(t.name)+" — "+Object(m.decodeEntities)(e.name)}}));return e.push.apply(e,s()(n)),e}),[])}),[]),r=function(e,t,n){var o=Object(l.useState)(""),c=a()(o,2),r=c[0],i=c[1],s=Object(l.useState)(""),u=a()(s,2),m=u[0],d=u[1];return Object(l.useEffect)((function(){var o=[],c=new RegExp(Object(p.escapeRegExp)(r),"i");if((m.length||r.length)&&(o=e.filter((function(e){return c.test(e.label)}))),r.length&&m.length){var a=new RegExp(Object(p.escapeRegExp)(m.replace(/\s/g,"")),"i");if((o=o.filter((function(e){return a.test(e.label.replace("-","").replace(/\s/g,""))}))).length>1){var i;(i=o.filter((function(e){return c.test(e.key)}))).length>0&&(o=i)}if(o.length>1){var s;1===(s=o.filter((function(e){return a.test(e.key)}))).length&&(o=s)}}1===o.length&&t!==o[0].key&&n("countryState",o[0].key)}),[r,m,t,e,n]),Object(l.createElement)(l.Fragment,null,Object(l.createElement)("input",{onChange:function(e){return i(e.target.value)},value:r,name:"country",type:"text",className:"woocommerce-select-control__autofill-input",tabIndex:"-1",autoComplete:"country"}),Object(l.createElement)("input",{onChange:function(e){return d(e.target.value)},value:m,name:"state",type:"text",className:"woocommerce-select-control__autofill-input",tabIndex:"-1",autoComplete:"address-level1"}))}(o,t("countryState").value,n);return Object(l.createElement)("div",{className:"woocommerce-store-address-fields"},Object(l.createElement)(h.TextControl,c()({label:Object(u.__)("Address line 1",'woocommerce'),required:!0,autoComplete:"address-line1"},t("addressLine1"))),Object(l.createElement)(h.TextControl,c()({label:Object(u.__)("Address line 2 (optional)",'woocommerce'),required:!0,autoComplete:"address-line2"},t("addressLine2"))),Object(l.createElement)(h.SelectControl,c()({label:Object(u.__)("Country / Region",'woocommerce'),required:!0,options:o,excludeSelectedOptions:!1,showAllOnFocus:!0,isSearchable:!0},t("countryState"),{controlClassName:t("countryState").className}),r),Object(l.createElement)(h.TextControl,c()({label:Object(u.__)("City",'woocommerce'),required:!0},t("city"),{autoComplete:"address-level2"})),Object(l.createElement)(h.TextControl,c()({label:Object(u.__)("Post code",'woocommerce'),required:!0,autoComplete:"postal-code"},t("postCode"))))}},630:function(e,t,n){"use strict";var o=n(0),c=n(28),r=Object(o.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(o.createElement)(c.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"}));t.a=r},682:function(e,t,n){},683:function(e,t,n){"use strict";var o,c=n(12),r=n(33).f,a=n(34),i=n(207),s=n(32),l=n(208),u=n(57),m="".endsWith,p=Math.min,d=l("endsWith");c({target:"String",proto:!0,forced:!!(u||d||(o=r(String.prototype,"endsWith"),!o||o.writable))&&!d},{endsWith:function(e){var t=String(s(this));i(e);var n=arguments.length>1?arguments[1]:void 0,o=a(t.length),c=void 0===n?o:p(a(n),o),r=String(e);return m?m.call(t,r,c):t.slice(c-r.length,c)===r}})},710:function(e,t,n){"use strict";n.r(t),n.d(t,"TaskDashboard",(function(){return st}));n(64),n(37),n(53),n(41),n(60),n(49),n(61);var o=n(22),c=n.n(o),r=n(23),a=n.n(r),i=n(18),s=n.n(i),l=n(24),u=n.n(l),m=n(25),p=n.n(m),d=n(14),h=n.n(d),b=n(7),f=n.n(b),_=n(0),g=(n(107),n(140),n(2)),O=n(65),y=n(26),v=n(59),k=n(92),j=(n(633),n(139),n(220),n(4)),w=n(5),S=n(132),E=n(85),P=n(145),C=n(231),T=n(608),x=n(322);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var c=h()(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return p()(this,n)}}var R=function(e){u()(n,e);var t=N(n);function n(e){var o;return c()(this,n),(o=t.call(this,e)).state={purchaseNowButtonBusy:!1,purchaseLaterButtonBusy:!1},o}return a()(n,[{key:"onClickPurchaseNow",value:function(){var e=this.props,t=e.productIds,n=e.onClickPurchaseNow;if(this.setState({purchaseNowButtonBusy:!0}),t.length){Object(k.recordEvent)("tasklist_modal_proceed_checkout",{product_ids:t,purchase_install:!0});var o=Object(x.a)("https://woocommerce.com/cart",{"wccom-replace-with":t.join(",")});n?n(o):window.location=o}}},{key:"onClickPurchaseLater",value:function(){var e=this.props.productIds;Object(k.recordEvent)("tasklist_modal_proceed_checkout",{product_ids:e,purchase_install:!1}),this.setState({purchaseLaterButtonBusy:!0}),this.props.onClickPurchaseLater()}},{key:"onClose",value:function(){var e=this.props,t=e.onClose,n=e.productIds;Object(k.recordEvent)("tasklist_modal_proceed_checkout",{product_ids:n,purchase_install:!1}),t()}},{key:"renderProducts",value:function(){var e=this.props.productIds,t=Object(E.g)("onboarding",{}),n=t.productTypes,o=void 0===n?{}:n,c=t.themes,r=void 0===c?[]:c,a=[];return e.forEach((function(e){var t=Object(w.find)(o,(function(t){return t.product===e}));t&&a.push({title:t.label,content:t.description});var n=Object(w.find)(r,(function(t){return t.id===e}));n&&a.push({title:Object(g.sprintf)(Object(g.__)("%s — %s per year",'woocommerce'),n.title,Object(S.decodeEntities)(n.price)),content:Object(_.createElement)("span",{dangerouslySetInnerHTML:Object(T.a)(n.excerpt)})})})),Object(_.createElement)(P.List,{items:a})}},{key:"render",value:function(){var e=this,t=this.state,n=t.purchaseNowButtonBusy,o=t.purchaseLaterButtonBusy;return Object(_.createElement)(j.Modal,{title:Object(g.__)("Would you like to add the following paid features to your store now?",'woocommerce'),onRequestClose:function(){return e.onClose()},className:"woocommerce-cart-modal"},this.renderProducts(),Object(_.createElement)("p",{className:"woocommerce-cart-modal__help-text"},Object(g.__)("You won't have access to this functionality until the extensions have been purchased and installed.",'woocommerce')),Object(_.createElement)("div",{className:"woocommerce-cart-modal__actions"},Object(_.createElement)(j.Button,{isLink:!0,isBusy:o,onClick:function(){return e.onClickPurchaseLater()}},Object(g.__)("I'll do it later",'woocommerce')),Object(_.createElement)(j.Button,{isPrimary:!0,isBusy:n,onClick:function(){return e.onClickPurchaseNow()}},Object(g.__)("Buy now",'woocommerce'))))}}]),n}(_.Component),A=Object(O.compose)(Object(y.withSelect)((function(e){var t=e(v.PLUGINS_STORE_NAME).getInstalledPlugins,n=(0,e(v.ONBOARDING_STORE_NAME).getProfileItems)(),o=t();return{profileItems:n,productIds:Object(C.e)(n,!1,o)}})))(R),I=n(16),M=n.n(I),B=n(134),D=n.n(B),L=(n(129),n(164),n(100),n(141)),F=n(50),z=n(95),U=n.n(z);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var c=h()(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return p()(this,n)}}var q=function(e){u()(r,e);var t,n,o=H(r);function r(e){var t;c()(this,r),t=o.call(this,e);var n=e.tasksStatus,a=n.hasHomepage,i=n.hasProducts;return t.stepVisibility={homepage:!a,import:!i},t.state={isDirty:!1,isPending:!1,logo:null,stepIndex:0,isUpdatingLogo:!1,isUpdatingNotice:!1,storeNoticeText:e.demoStoreNotice||""},t.completeStep=t.completeStep.bind(s()(t)),t.createHomepage=t.createHomepage.bind(s()(t)),t.importProducts=t.importProducts.bind(s()(t)),t.updateLogo=t.updateLogo.bind(s()(t)),t.updateNotice=t.updateNotice.bind(s()(t)),t}return a()(r,[{key:"componentDidMount",value:function(){var e=this.props.tasksStatus.themeMods;e&&e.custom_logo&&this.setState({logo:{id:e.custom_logo}})}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state,o=n.isPending,c=n.logo,r=this.props.demoStoreNotice;!c||c.url||o||(this.setState({isPending:!0}),wp.media.attachment(c.id).fetch().then((function(){var e=wp.media.attachment(c.id).get("url");t.setState({isPending:!1,logo:{id:c.id,url:e}})}))),r&&e.demoStoreNotice!==r&&this.setState({storeNoticeText:r})}},{key:"completeStep",value:function(){var e=this.state.stepIndex;this.getSteps()[e+1]?this.setState({stepIndex:e+1}):Object(F.getHistory)().push(Object(F.getNewPath)({},"/",{}))}},{key:"importProducts",value:function(){var e=this,t=this.props,n=t.clearTaskStatusCache,o=t.createNotice;this.setState({isPending:!0}),Object(k.recordEvent)("tasklist_appearance_import_demo",{}),U()({path:"".concat(v.WC_ADMIN_NAMESPACE,"/onboarding/tasks/import_sample_products"),method:"POST"}).then((function(t){t.failed&&t.failed.length?o("error",Object(g.__)("There was an error importing some of the sample products",'woocommerce')):(o("success",Object(g.__)("All sample products have been imported",'woocommerce')),n()),e.setState({isPending:!1}),e.completeStep()})).catch((function(t){o("error",t.message),e.setState({isPending:!1})}))}},{key:"createHomepage",value:function(){var e=this,t=this.props,n=t.clearTaskStatusCache,o=t.createNotice;this.setState({isPending:!0}),Object(k.recordEvent)("tasklist_appearance_create_homepage",{create_homepage:!0}),U()({path:"/wc-admin/onboarding/tasks/create_homepage",method:"POST"}).then((function(t){n(),o(t.status,t.message,{actions:t.edit_post_link?[{label:Object(g.__)("Customize",'woocommerce'),onClick:function(){Object(k.queueRecordEvent)("tasklist_appearance_customize_homepage",{}),window.location="".concat(t.edit_post_link,"&wc_onboarding_active_task=homepage")}}]:null}),e.setState({isPending:!1}),e.completeStep()})).catch((function(t){o("error",t.message),e.setState({isPending:!1})}))}},{key:"updateLogo",value:(n=D()(M.a.mark((function e(){var t,n,o,c,r,a,i,s,l;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.clearTaskStatusCache,o=t.createNotice,c=t.stylesheet,r=t.themeMods,a=t.updateOptions,i=this.state.logo,s=V(V({},r),{},{custom_logo:i?i.id:null}),Object(k.recordEvent)("tasklist_appearance_upload_logo"),this.setState({isUpdatingLogo:!0}),e.next=7,a(f()({},"theme_mods_".concat(c),s));case 7:l=e.sent,n(),l.success?(this.setState({isUpdatingLogo:!1}),o("success",Object(g.__)("Store logo updated sucessfully",'woocommerce')),this.completeStep()):o("error",l.message);case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"updateNotice",value:(t=D()(M.a.mark((function e(){var t,n,o,c,r,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.clearTaskStatusCache,o=t.createNotice,c=t.updateOptions,r=this.state.storeNoticeText,Object(k.recordEvent)("tasklist_appearance_set_store_notice",{added_text:Boolean(r.length)}),this.setState({isUpdatingNotice:!0}),e.next=6,c({woocommerce_task_list_appearance_complete:!0,woocommerce_demo_store:r.length?"yes":"no",woocommerce_demo_store_notice:r});case 6:a=e.sent,n(),a.success?(this.setState({isUpdatingNotice:!1}),o("success",Object(g.__)("🎨 Your store is looking great! Don't forget to continue personalizing it",'woocommerce')),this.completeStep()):o("error",a.message);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getSteps",value:function(){var e=this,t=this.state,n=t.isDirty,o=t.isPending,c=t.logo,r=t.storeNoticeText,a=t.isUpdatingLogo,i=[{key:"import",label:Object(g.__)("Import sample products",'woocommerce'),description:Object(g.__)("We’ll add some products that will make it easier to see what your store looks like",'woocommerce'),content:Object(_.createElement)(_.Fragment,null,Object(_.createElement)(j.Button,{onClick:this.importProducts,isBusy:o,isPrimary:!0},Object(g.__)("Import products",'woocommerce')),Object(_.createElement)(j.Button,{onClick:function(){return e.completeStep()}},Object(g.__)("Skip",'woocommerce'))),visible:this.stepVisibility.import},{key:"homepage",label:Object(g.__)("Create a custom homepage",'woocommerce'),description:Object(g.__)("Create a new homepage and customize it to suit your needs",'woocommerce'),content:Object(_.createElement)(_.Fragment,null,Object(_.createElement)(j.Button,{isPrimary:!0,isBusy:o,onClick:this.createHomepage},Object(g.__)("Create homepage",'woocommerce')),Object(_.createElement)(j.Button,{isTertiary:!0,onClick:function(){Object(k.recordEvent)("tasklist_appearance_create_homepage",{create_homepage:!1}),e.completeStep()}},Object(g.__)("Skip",'woocommerce'))),visible:this.stepVisibility.homepage},{key:"logo",label:Object(g.__)("Upload a logo",'woocommerce'),description:Object(g.__)("Ensure your store is on-brand by adding your logo",'woocommerce'),content:o?null:Object(_.createElement)(_.Fragment,null,Object(_.createElement)(P.ImageUpload,{image:c,onChange:function(t){return e.setState({isDirty:!0,logo:t})}}),Object(_.createElement)(j.Button,{disabled:!c&&!n,onClick:this.updateLogo,isBusy:a,isPrimary:!0},Object(g.__)("Proceed",'woocommerce')),Object(_.createElement)(j.Button,{isTertiary:!0,onClick:function(){return e.completeStep()}},Object(g.__)("Skip",'woocommerce'))),visible:!0},{key:"notice",label:Object(g.__)("Set a store notice",'woocommerce'),description:Object(g.__)("Optionally display a prominent notice across all pages of your store",'woocommerce'),content:Object(_.createElement)(_.Fragment,null,Object(_.createElement)(P.TextControl,{label:Object(g.__)("Store notice text",'woocommerce'),placeholder:Object(g.__)("Store notice text",'woocommerce'),value:r,onChange:function(t){return e.setState({storeNoticeText:t})}}),Object(_.createElement)(j.Button,{onClick:this.updateNotice,isPrimary:!0},Object(g.__)("Complete task",'woocommerce'))),visible:!0}];return Object(w.filter)(i,(function(e){return e.visible}))}},{key:"render",value:function(){var e=this.state,t=e.isPending,n=e.stepIndex,o=e.isUpdatingLogo,c=e.isUpdatingNotice,r=this.getSteps()[n].key;return Object(_.createElement)("div",{className:"woocommerce-task-appearance"},Object(_.createElement)(j.Card,{className:"woocommerce-task-card"},Object(_.createElement)(j.CardBody,null,Object(_.createElement)(P.Stepper,{isPending:c||o||t,isVertical:!0,currentStep:r,steps:this.getSteps()}))))}}]),r}(_.Component),J=Object(O.compose)(Object(y.withSelect)((function(e){var t=e(v.OPTIONS_STORE_NAME).getOption,n=(0,e(v.ONBOARDING_STORE_NAME).getTasksStatus)();return{demoStoreNotice:t("woocommerce_demo_store_notice"),stylesheet:t("stylesheet"),tasksStatus:n}})),Object(y.withDispatch)((function(e){var t=e("core/notices").createNotice,n=e(v.OPTIONS_STORE_NAME).updateOptions,o=e(v.ONBOARDING_STORE_NAME).invalidateResolutionForStoreSelector;return{clearTaskStatusCache:function(){return o("getTasksStatus")},createNotice:t,updateOptions:n}})))(q),W=n(43),Z=n.n(W),Q=(n(51),n(426)),Y=n(28),K=Object(_.createElement)(Y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(_.createElement)(Y.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})),$=n(630),X=Object(_.createElement)(Y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},Object(_.createElement)(Y.Path,{d:"M10 1c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 16c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.1 7-7 7zm1-11H9v3H6v2h3v3h2v-3h3V9h-3V6zM10 1c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 16c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.1 7-7 7zm1-11H9v3H6v2h3v3h2v-3h3V9h-3V6z"})),ee=Object(_.createElement)(Y.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(_.createElement)(Y.Path,{d:"M19 6.2h-5.9l-.6-1.1c-.3-.7-1-1.1-1.8-1.1H5c-1.1 0-2 .9-2 2v11.8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8.2c0-1.1-.9-2-2-2zm.5 11.6c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h5.8c.2 0 .4.1.4.3l1 2H19c.3 0 .5.2.5.5v9.5zM8 12.8h8v-1.5H8v1.5zm0 3h8v-1.5H8v1.5z"})),te=Object(_.createElement)(Y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(_.createElement)(Y.Path,{d:"M18 11.3l-1-1.1-4 4V3h-1.5v11.3L7 10.2l-1 1.1 6.2 5.8 5.8-5.8zm.5 3.7v3.5h-13V15H4v5h16v-5h-1.5z"})),ne=(n(682),n(607)),oe=[{key:"physical",title:Object(g.__)("Physical product",'woocommerce'),subtitle:Object(g.__)("Tangible items that get delivered to customers",'woocommerce')},{key:"digital",title:Object(g.__)("Digital product",'woocommerce'),subtitle:Object(g.__)("Items that customers download or access through your website",'woocommerce')},{key:"variable",title:Object(g.__)("Variable product",'woocommerce'),subtitle:Object(g.__)("Products with several versions that customers can choose from",'woocommerce')}];function ce(e){var t=e.onClose,n=Object(_.useState)(),o=Z()(n,2),c=o[0],r=o[1],a=Object(_.useState)(!1),i=Z()(a,2),s=i[0],l=i[1],u=Object(y.useDispatch)(v.ITEMS_STORE_NAME).createProductFromTemplate,m=function(e){var t=e.target&&e.target.value;r(t)},p=Object(L.applyFilters)("woocommerce_admin_onboarding_product_templates",oe);return Object(_.createElement)(j.Modal,{title:Object(g.__)("Start with a template"),isDismissible:!0,onRequestClose:function(){return t()},className:"woocommerce-product-template-modal"},Object(_.createElement)("div",{className:"woocommerce-product-template-modal__wrapper"},Object(_.createElement)("div",{className:"woocommerce-product-template-modal__list"},Object(_.createElement)(P.List,{items:p},(function(e,t){return Object(_.createElement)("div",{className:"woocommerce-list__item-inner"},Object(_.createElement)("input",{id:"product-templates-".concat(e.key||t),className:"components-radio-control__input",type:"radio",name:"product-template-options",value:e.key,onChange:m,checked:e.key===c}),Object(_.createElement)("label",{className:"woocommerce-list__item-text",htmlFor:"product-templates-".concat(e.key||t)},Object(_.createElement)("div",{className:"woocommerce-list__item-label"},e.title),Object(_.createElement)("div",{className:"woocommerce-list__item-subtitle"},e.subtitle)))}))),Object(_.createElement)("div",{className:"woocommerce-product-template-modal__actions"},Object(_.createElement)(j.Button,{isPrimary:!0,isBusy:s,disabled:!c||s,onClick:function(){l(!0),Object(k.recordEvent)("tasklist_product_template_selection",{product_type:c}),c?u({template_name:c,status:"draft"},{_fields:["id"]}).then((function(e){if(e&&e.id){var t=Object(E.f)("post.php?post=".concat(e.id,"&action=edit&wc_onboarding_active_task=products&tutorial=true"));window.location=t}}),(function(e){Object(ne.a)(e),l(!1)})):t&&(Object(k.recordEvent)("tasklist_product_template_dismiss"),t())}},Object(g.__)("Go")))))}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=[{key:"addProductTemplate",title:Object(_.createElement)(_.Fragment,null,Object(g.__)("Start with a template",'woocommerce'),Object(_.createElement)(P.Pill,null,Object(g.__)("Recommended",'woocommerce'))),content:Object(g.__)("Use a template to add physical, digital, and variable products",'woocommerce'),before:Object(_.createElement)(Q.a,{icon:K}),after:Object(_.createElement)(Q.a,{icon:$.a}),onClick:function(){return Object(k.recordEvent)("tasklist_add_product",{method:"product_template"})}},{key:"addProductManually",title:Object(g.__)("Add manually",'woocommerce'),content:Object(g.__)("For small stores we recommend adding products manually",'woocommerce'),before:Object(_.createElement)(Q.a,{icon:X}),after:Object(_.createElement)(Q.a,{icon:$.a}),onClick:function(){return Object(k.recordEvent)("tasklist_add_product",{method:"manually"})},href:Object(E.f)("post-new.php?post_type=product&wc_onboarding_active_task=products&tutorial=true")},{key:"importProducts",title:Object(g.__)("Import via CSV",'woocommerce'),content:Object(g.__)("For larger stores we recommend importing all products at once via CSV file",'woocommerce'),before:Object(_.createElement)(Q.a,{icon:ee}),after:Object(_.createElement)(Q.a,{icon:$.a}),onClick:function(){return Object(k.recordEvent)("tasklist_add_product",{method:"import"})},href:Object(E.f)("edit.php?post_type=product&page=product_importer&wc_onboarding_active_task=product-import")},{key:"migrateProducts",title:Object(g.__)("Import from another service",'woocommerce'),content:Object(g.__)("For stores currently selling elsewhere we suggest using a product migration service",'woocommerce'),before:Object(_.createElement)(Q.a,{icon:te}),after:Object(_.createElement)(Q.a,{icon:$.a}),onClick:function(){return Object(k.recordEvent)("tasklist_add_product",{method:"migrate"})},href:"https://woocommerce.com/products/cart2cart/",target:"_blank"}];function se(){var e=Object(_.useState)(null),t=Z()(e,2),n=t[0],o=t[1],c=ie.map((function(e){return ae(ae({},e),{},{onClick:function(){return function(e){e.onClick(),"addProductTemplate"===e.key&&o(!0)}(e)}})}));return Object(_.createElement)(_.Fragment,null,Object(_.createElement)(j.Card,{className:"woocommerce-task-card"},Object(_.createElement)(j.CardBody,{size:null},Object(_.createElement)(P.List,{items:c}))),n?Object(_.createElement)(ce,{onClose:function(){return o(null)}}):null)}var le=n(80),ue=n.n(le),me=(n(151),n(123),n(146),n(192),n(320),n(99)),pe=n.n(me),de=n(1),he=n.n(de);function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var c=h()(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return p()(this,n)}}var fe=function(e){u()(o,e);var t,n=be(o);function o(e){var t;return c()(this,o),(t=n.call(this,e)).state={isConnecting:!1},t.connectJetpack=t.connectJetpack.bind(s()(t)),e.setIsPending(!0),t}return a()(o,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.createNotice,o=t.error,c=t.isRequesting,r=t.onError,a=t.setIsPending;e.isRequesting&&!c&&a(!1),o&&o!==e.error&&(r&&r(),n("error",o))}},{key:"connectJetpack",value:(t=D()(M.a.mark((function e(){var t,n,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=t.jetpackConnectUrl,o=t.onConnect,this.setState({isConnecting:!0},(function(){o&&o(),window.location=n}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.hasErrors,n=e.isRequesting,o=e.onSkip,c=e.skipText,r=e.onAbort,a=e.abortText;return Object(_.createElement)(_.Fragment,null,t?Object(_.createElement)(j.Button,{isPrimary:!0,onClick:function(){return window.location.reload()}},Object(g.__)("Retry",'woocommerce')):Object(_.createElement)(j.Button,{disabled:n,isBusy:this.state.isConnecting,isPrimary:!0,onClick:this.connectJetpack},Object(g.__)("Connect",'woocommerce')),o&&Object(_.createElement)(j.Button,{onClick:o},c||Object(g.__)("No thanks",'woocommerce')),r&&Object(_.createElement)(j.Button,{onClick:r},a||Object(g.__)("Abort",'woocommerce')))}}]),o}(_.Component);fe.propTypes={createNotice:he.a.func.isRequired,error:he.a.string,hasErrors:he.a.bool,isRequesting:he.a.bool,jetpackConnectUrl:he.a.string,onConnect:he.a.func,onError:he.a.func,onSkip:he.a.func,redirectUrl:he.a.string,skipText:he.a.string,setIsPending:he.a.func,onAbort:he.a.func,abortText:he.a.string},fe.defaultProps={setIsPending:function(){}};var _e=Object(O.compose)(Object(y.withSelect)((function(e,t){var n=e(v.PLUGINS_STORE_NAME),o=n.getJetpackConnectUrl,c=n.isPluginsRequesting,r=n.getPluginsError,a={redirect_url:t.redirectUrl||window.location.href},i=c("getJetpackConnectUrl");return{error:r("getJetpackConnectUrl")||"",isRequesting:i,jetpackConnectUrl:o(a)}})),Object(y.withDispatch)((function(e){return{createNotice:e("core/notices").createNotice}})))(fe),ge=n(620);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var c=h()(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return p()(this,n)}}var ke=function(e){u()(o,e);var t,n=ve(o);function o(){var e;return c()(this,o),(e=n.apply(this,arguments)).onSubmit=e.onSubmit.bind(s()(e)),e}return a()(o,[{key:"onSubmit",value:(t=D()(M.a.mark((function e(t){var n,o,c,r,a,i;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,o=n.onComplete,c=n.createNotice,r=n.isSettingsError,a=n.updateAndPersistSettingsForGroup,i=n.settings,e.next=3,a("general",{general:ye(ye({},i),{},{woocommerce_store_address:t.addressLine1,woocommerce_store_address_2:t.addressLine2,woocommerce_default_country:t.countryState,woocommerce_store_city:t.city,woocommerce_store_postcode:t.postCode})});case 3:r?c("error",Object(g.__)("There was a problem saving your store location",'woocommerce')):o(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getInitialValues",value:function(){var e=this.props.settings;return{addressLine1:e.woocommerce_store_address||"",addressLine2:e.woocommerce_store_address_2||"",city:e.woocommerce_store_city||"",countryState:e.woocommerce_default_country||"",postCode:e.woocommerce_store_postcode||""}}},{key:"render",value:function(){return this.props.isSettingsRequesting?null:Object(_.createElement)(P.Form,{initialValues:this.getInitialValues(),onSubmitCallback:this.onSubmit,validate:ge.b},(function(e){var t=e.getInputProps,n=e.handleSubmit,o=e.setValue;return Object(_.createElement)(_.Fragment,null,Object(_.createElement)(ge.a,{getInputProps:t,setValue:o}),Object(_.createElement)(j.Button,{isPrimary:!0,onClick:n},Object(g.__)("Continue",'woocommerce')))}))}}]),o}(_.Component),je=(n(66),n(683),Object(_.createElement)(Y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},Object(_.createElement)(Y.Path,{d:"M9 0C4.03 0 0 4.03 0 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9zM1.11 9.68h2.51c.04.91.167 1.814.38 2.7H1.84c-.403-.85-.65-1.764-.73-2.7zm8.57-5.4V1.19c.964.366 1.756 1.08 2.22 2 .205.347.386.708.54 1.08l-2.76.01zm3.22 1.35c.232.883.37 1.788.41 2.7H9.68v-2.7h3.22zM8.32 1.19v3.09H5.56c.154-.372.335-.733.54-1.08.462-.924 1.255-1.64 2.22-2.01zm0 4.44v2.7H4.7c.04-.912.178-1.817.41-2.7h3.21zm-4.7 2.69H1.11c.08-.936.327-1.85.73-2.7H4c-.213.886-.34 1.79-.38 2.7zM4.7 9.68h3.62v2.7H5.11c-.232-.883-.37-1.788-.41-2.7zm3.63 4v3.09c-.964-.366-1.756-1.08-2.22-2-.205-.347-.386-.708-.54-1.08l2.76-.01zm1.35 3.09v-3.04h2.76c-.154.372-.335.733-.54 1.08-.464.92-1.256 1.634-2.22 2v-.04zm0-4.44v-2.7h3.62c-.04.912-.178 1.817-.41 2.7H9.68zm4.71-2.7h2.51c-.08.936-.327 1.85-.73 2.7H14c.21-.87.337-1.757.38-2.65l.01-.05zm0-1.35c-.046-.894-.176-1.78-.39-2.65h2.16c.403.85.65 1.764.73 2.7l-2.5-.05zm1-4H13.6c-.324-.91-.793-1.76-1.39-2.52 1.244.56 2.325 1.426 3.14 2.52h.04zm-9.6-2.52c-.597.76-1.066 1.61-1.39 2.52H2.65c.815-1.094 1.896-1.96 3.14-2.52zm-3.15 12H4.4c.324.91.793 1.76 1.39 2.52-1.248-.567-2.33-1.445-3.14-2.55l-.01.03zm9.56 2.52c.597-.76 1.066-1.61 1.39-2.52h1.76c-.82 1.08-1.9 1.933-3.14 2.48l-.01.04z"}))),we=n(598);function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var c=h()(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return p()(this,n)}}var Ee=function(e){u()(o,e);var t,n=Se(o);function o(){var e;return c()(this,o),(e=n.apply(this,arguments)).updateShippingZones=e.updateShippingZones.bind(s()(e)),e}return a()(o,[{key:"getShippingMethods",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&e.methods&&Array.isArray(e.methods)?t?e.methods?e.methods.filter((function(e){return e.method_id===t})):[]:e.methods:[]}},{key:"disableShippingMethods",value:function(e,t){t.length&&t.forEach((function(t){U()({method:"POST",path:"/wc/v3/shipping/zones/".concat(e.id,"/methods/").concat(t.instance_id),data:{enabled:!1}})}))}},{key:"updateShippingZones",value:(t=D()(M.a.mark((function e(t){var n,o,c,r,a,i,s=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.props,o=n.clearTaskStatusCache,c=n.createNotice,r=n.shippingZones,a=!1,i=!1,r.forEach((function(e){0===e.id?a=e.toggleable&&t["".concat(e.id,"_enabled")]:i=""!==t["".concat(e.id,"_rate")]&&parseFloat(t["".concat(e.id,"_rate")])!==parseFloat(0);var n=s.getShippingMethods(e),o=parseFloat(t["".concat(e.id,"_rate")])===parseFloat(0)?"free_shipping":"flat_rate",c=s.getShippingMethods(e,o).length?s.getShippingMethods(e,o)[0]:null;if(!e.toggleable||t["".concat(e.id,"_enabled")]){if(c){var r=n.filter((function(e){return e.instance_id!==c.instance_id}));s.disableShippingMethods(e,r)}U()({method:"POST",path:c?"/wc/v3/shipping/zones/".concat(e.id,"/methods/").concat(c.instance_id):"/wc/v3/shipping/zones/".concat(e.id,"/methods"),data:{method_id:o,enabled:!0,settings:{cost:t["".concat(e.id,"_rate")]}}})}else s.disableShippingMethods(e,n)})),Object(k.recordEvent)("tasklist_shipping_set_costs",{shipping_cost:i,rest_world:a}),o(),c("success",Object(g.__)("Your shipping rates have been updated",'woocommerce')),this.props.onComplete();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"renderInputPrefix",value:function(){var e=this.context.getCurrencyConfig(),t=e.symbolPosition,n=e.symbol;return 0===t.indexOf("right")?null:Object(_.createElement)("span",{className:"woocommerce-shipping-rate__control-prefix"},n)}},{key:"renderInputSuffix",value:function(e){var t=this.context.getCurrencyConfig(),n=t.symbolPosition,o=t.symbol;return 0===n.indexOf("right")?Object(_.createElement)("span",{className:"woocommerce-shipping-rate__control-suffix"},o):parseFloat(e)===parseFloat(0)?Object(_.createElement)("span",{className:"woocommerce-shipping-rate__control-suffix"},Object(g.__)("Free shipping",'woocommerce')):null}},{key:"getFormattedRate",value:function(e){var t=this.context.formatDecimalString,n=t(e);return e.length&&n.length?t(e):t(0)}},{key:"getInitialValues",value:function(){var e=this,t=this.context.formatDecimalString,n={};return this.props.shippingZones.forEach((function(o){var c=e.getShippingMethods(o),r=c.length&&c[0].settings.cost?e.getFormattedRate(c[0].settings.cost.value):t(0);n["".concat(o.id,"_rate")]=r,c.length&&c[0].enabled?n["".concat(o.id,"_enabled")]=!0:n["".concat(o.id,"_enabled")]=!1})),n}},{key:"validate",value:function(e){var t={};return Object.keys(e).filter((function(e){return e.endsWith("_rate")})).forEach((function(n){e[n]<0&&(t[n]=Object(g.__)("Shipping rates can not be negative numbers.",'woocommerce'))})),t}},{key:"render",value:function(){var e=this,t=this.props,n=t.buttonText,o=t.shippingZones;return o.length?Object(_.createElement)(P.Form,{initialValues:this.getInitialValues(),onSubmitCallback:this.updateShippingZones,validate:this.validate},(function(t){var c=t.getInputProps,r=t.handleSubmit,a=t.setTouched,i=t.setValue,s=t.values;return Object(_.createElement)(_.Fragment,null,Object(_.createElement)("div",{className:"woocommerce-shipping-rates"},o.map((function(t){return Object(_.createElement)("div",{className:"woocommerce-shipping-rate",key:t.id},Object(_.createElement)("div",{className:"woocommerce-shipping-rate__icon"},t.locations?t.locations.map((function(e){return Object(_.createElement)(P.Flag,{size:24,code:e.code,key:e.code})})):Object(_.createElement)(Q.a,{icon:je})),Object(_.createElement)("div",{className:"woocommerce-shipping-rate__main"},t.toggleable?Object(_.createElement)("label",{htmlFor:"woocommerce-shipping-rate__toggle-".concat(t.id),className:"woocommerce-shipping-rate__name"},t.name,Object(_.createElement)(j.FormToggle,ue()({id:"woocommerce-shipping-rate__toggle-".concat(t.id)},c("".concat(t.id,"_enabled"))))):Object(_.createElement)("div",{className:"woocommerce-shipping-rate__name"},t.name),(!t.toggleable||s["".concat(t.id,"_enabled")])&&Object(_.createElement)(P.TextControlWithAffixes,ue()({label:Object(g.__)("Shipping cost",'woocommerce'),required:!0},c("".concat(t.id,"_rate")),{onBlur:function(){a("".concat(t.id,"_rate")),i("".concat(t.id,"_rate"),e.getFormattedRate(s["".concat(t.id,"_rate")]))},prefix:e.renderInputPrefix(),suffix:e.renderInputSuffix(s["".concat(t.id,"_rate")]),className:"muriel-input-text woocommerce-shipping-rate__control-wrapper"}))))}))),Object(_.createElement)(j.Button,{isPrimary:!0,onClick:r},n||Object(g.__)("Update",'woocommerce')))})):null}}]),o}(_.Component);Ee.propTypes={buttonText:he.a.string,onComplete:he.a.func.isRequired,createNotice:he.a.func.isRequired,shippingZones:he.a.array},Ee.defaultProps={shippingZones:[]},Ee.contextType=we.a;var Pe=Object(O.compose)(Object(y.withDispatch)((function(e){var t=e(v.ONBOARDING_STORE_NAME).invalidateResolutionForStoreSelector;return{clearTaskStatusCache:function(){return t("getTasksStatus")}}})))(Ee);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var c=h()(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return p()(this,n)}}var Te=function(e){u()(o,e);var t,n=Ce(o);function o(e){var t;return c()(this,o),(t=n.call(this,e)).initialState={isPending:!1,step:"store_location",shippingZones:[]},t.activePlugins=e.activePlugins,t.state=t.initialState,t.completeStep=t.completeStep.bind(s()(t)),t}return a()(o,[{key:"componentDidMount",value:function(){this.reset()}},{key:"reset",value:function(){this.setState(this.initialState)}},{key:"fetchShippingZones",value:(t=D()(M.a.mark((function e(){var t,n,o,c,r,a,i;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isPending:!0}),t=this.props,n=t.countryCode,o=t.countryName,c=[],e.next=5,U()({path:"/wc/v3/shipping/zones"});case 5:return r=e.sent,a=!1,e.next=9,Promise.all(r.map(function(){var e=D()(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.id){e.next=8;break}return e.next=3,U()({path:"/wc/v3/shipping/zones/".concat(t.id,"/methods")});case 3:return t.methods=e.sent,t.name=Object(g.__)("Rest of the world",'woocommerce'),t.toggleable=!0,c.push(t),e.abrupt("return");case 8:return e.next=10,U()({path:"/wc/v3/shipping/zones/".concat(t.id,"/locations")});case 10:if(t.locations=e.sent,!t.locations.find((function(e){return n===e.code}))){e.next=18;break}return e.next=15,U()({path:"/wc/v3/shipping/zones/".concat(t.id,"/methods")});case 15:t.methods=e.sent,c.push(t),a=!0;case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:if(a){e.next=17;break}return e.next=12,U()({method:"POST",path:"/wc/v3/shipping/zones",data:{name:o}});case 12:return i=e.sent,e.next=15,U()({method:"POST",path:"/wc/v3/shipping/zones/".concat(i.id,"/locations"),data:[{code:n,type:"country"}]});case 15:i.locations=e.sent,c.push(i);case 17:c.reverse(),this.setState({isPending:!1,shippingZones:c});case 19:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e,t){var n=this.props,o=n.countryCode,c=n.settings,r=c.woocommerce_store_address,a=c.woocommerce_default_country,i=c.woocommerce_store_postcode,s=this.state.step;"rates"!==s||e.countryCode===o&&"rates"===t.step||this.fetchShippingZones();var l=Boolean(r&&a&&i);"store_location"===s&&l&&this.completeStep()}},{key:"completeStep",value:function(){var e=this.props.createNotice,t=this.state.step,n=this.getSteps(),o=n.findIndex((function(e){return e.key===t})),c=n[o+1];c?this.setState({step:c.key}):(e("success",Object(g.__)("📦 Shipping is done! Don't worry, you can always change it later",'woocommerce')),Object(F.getHistory)().push(Object(F.getNewPath)({},"/",{})))}},{key:"getPluginsToActivate",value:function(){var e=this.props.countryCode,t=[];return["GB","CA","AU"].includes(e)?t.push("woocommerce-shipstation-integration"):"US"===e&&(t.push("woocommerce-services"),t.push("jetpack")),Object(w.difference)(t,this.activePlugins)}},{key:"getSteps",value:function(){var e=this,t=this.props,n=t.countryCode,o=t.isJetpackConnected,c=t.settings,r=this.getPluginsToActivate(),a=!o&&"US"===n,i=[{key:"store_location",label:Object(g.__)("Set store location",'woocommerce'),description:Object(g.__)("The address from which your business operates",'woocommerce'),content:Object(_.createElement)(ke,ue()({},this.props,{onComplete:function(t){var n=Object(C.b)(t.countryState);Object(k.recordEvent)("tasklist_shipping_set_location",{country:n}),e.completeStep()}})),visible:!0},{key:"rates",label:Object(g.__)("Set shipping costs",'woocommerce'),description:Object(g.__)("Define how much customers pay to ship to different destinations",'woocommerce'),content:Object(_.createElement)(Pe,ue()({buttonText:r.length||a?Object(g.__)("Proceed",'woocommerce'):Object(g.__)("Complete task",'woocommerce'),shippingZones:this.state.shippingZones,onComplete:this.completeStep},this.props)),visible:"disabled"!==c.woocommerce_ship_to_countries},{key:"label_printing",label:Object(g.__)("Enable shipping label printing",'woocommerce'),description:r.includes("woocommerce-shipstation-integration")?pe()({mixedString:Object(g.__)("We recommend using ShipStation to save time at the post office by printing your shipping labels at home. Try ShipStation free for 30 days. {{link}}Learn more{{/link}}.",'woocommerce'),components:{link:Object(_.createElement)(P.Link,{href:"https://woocommerce.com/products/shipstation-integration",target:"_blank",type:"external"})}}):Object(g.__)("With WooCommerce Shipping and Jetpack you can save time at the Post Office by printing your shipping labels at home",'woocommerce'),content:Object(_.createElement)(P.Plugins,ue()({onComplete:function(t,n){Object(ne.a)(n),Object(k.recordEvent)("tasklist_shipping_label_printing",{install:!0,plugins_to_activate:r}),e.completeStep()},onError:function(e,t){return Object(ne.a)(t)},onSkip:function(){Object(k.recordEvent)("tasklist_shipping_label_printing",{install:!1,plugins_to_activate:r}),Object(F.getHistory)().push(Object(F.getNewPath)({},"/",{}))},pluginSlugs:r},this.props)),visible:r.length},{key:"connect",label:Object(g.__)("Connect your store",'woocommerce'),description:Object(g.__)("Connect your store to WordPress.com to enable label printing",'woocommerce'),content:Object(_.createElement)(_e,ue()({redirectUrl:Object(E.f)("admin.php?page=wc-admin"),completeStep:this.completeStep},this.props,{onConnect:function(){Object(k.recordEvent)("tasklist_shipping_connect_store")}})),visible:a}];return Object(w.filter)(i,(function(e){return e.visible}))}},{key:"render",value:function(){var e=this.state,t=e.isPending,n=e.step,o=this.props.isUpdateSettingsRequesting;return Object(_.createElement)("div",{className:"woocommerce-task-shipping"},Object(_.createElement)(j.Card,{className:"woocommerce-task-card"},Object(_.createElement)(j.CardBody,null,Object(_.createElement)(P.Stepper,{isPending:t||o,isVertical:!0,currentStep:n,steps:this.getSteps()}))))}}]),o}(_.Component),xe=Object(O.compose)(Object(y.withSelect)((function(e){var t=e(v.SETTINGS_STORE_NAME),n=t.getSettings,o=t.isUpdateSettingsRequesting,c=e(v.PLUGINS_STORE_NAME),r=c.getActivePlugins,a=c.isJetpackConnected,i=n("general").general,s=void 0===i?{}:i,l=Object(C.b)(s.woocommerce_default_country),u=Object(E.g)("dataEndpoints",{}).countries,m=l?(void 0===u?[]:u).find((function(e){return e.code===l})):null,p=m?m.name:null,d=r();return{countryCode:l,countryName:p,isUpdateSettingsRequesting:o("general"),settings:s,activePlugins:d,isJetpackConnected:a()}})),Object(y.withDispatch)((function(e){return{createNotice:e("core/notices").createNotice,updateAndPersistSettingsForGroup:e(v.SETTINGS_STORE_NAME).updateAndPersistSettingsForGroup}})))(Te),Ne=n(105);function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var c=h()(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return p()(this,n)}}var Me=function(e){u()(o,e);var t,n=Ie(o);function o(e){var t;c()(this,o),t=n.call(this,e);var r=e.hasCompleteAddress,a=e.pluginsToActivate;return t.initialState={isPending:!1,stepIndex:r?1:0,cachedPluginsToActivate:a},t.state=t.initialState,t.completeStep=t.completeStep.bind(s()(t)),t}return a()(o,[{key:"componentDidMount",value:function(){this.reset()}},{key:"reset",value:function(){this.setState(this.initialState)}},{key:"shouldShowSuccessScreen",value:function(){var e=this.props,t=e.isJetpackConnected,n=e.hasCompleteAddress,o=e.pluginsToActivate;return n&&!o.length&&t&&this.isTaxJarSupported()}},{key:"isTaxJarSupported",value:function(){var e=this.props,t=e.countryCode,n=e.tasksStatus,o=n.automatedTaxSupportedCountries,c=void 0===o?[]:o;return!n.taxJarActivated&&c.includes(t)}},{key:"completeStep",value:function(){var e=this.state.stepIndex;this.getSteps()[e+1]&&this.setState({stepIndex:e+1})}},{key:"manuallyConfigureTaxRates",value:(t=D()(M.a.mark((function e(){var t,n,o,c=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=t.generalSettings,o=t.updateAndPersistSettingsForGroup,"yes"!==n.woocommerce_calc_taxes?(this.setState({isPending:!0}),o("general",{general:Ae(Ae({},n),{},{woocommerce_calc_taxes:"yes"})}).then((function(){return c.redirectToTaxSettings()})).catch((function(e){return Object(ne.a)(e)}))):this.redirectToTaxSettings();case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"updateAutomatedTax",value:function(e){var t=this,n=this.props,o=n.clearTaskStatusCache,c=n.createNotice,r=n.updateAndPersistSettingsForGroup,a=n.generalSettings,i=n.taxSettings;Promise.all([r("tax",{tax:Ae(Ae({},i),{},{wc_connect_taxes_enabled:e?"yes":"no"})}),r("general",{general:Ae(Ae({},a),{},{woocommerce_calc_taxes:"yes"})})]).then((function(){o(),e?(c("success",Object(g.__)("You're awesome! One less item on your to-do list ✅",'woocommerce')),Object(F.getHistory)().push(Object(F.getNewPath)({},"/",{}))):t.redirectToTaxSettings()})).catch((function(){c("error",Object(g.__)("There was a problem updating your tax settings",'woocommerce'))}))}},{key:"redirectToTaxSettings",value:function(){window.location=Object(E.f)("admin.php?page=wc-settings&tab=tax&section=standard&wc_onboarding_active_task=tax")}},{key:"doNotChargeSalesTax",value:function(){var e=this.props.updateOptions;Object(k.queueRecordEvent)("tasklist_tax_connect_store",{connect:!1,no_tax:!0}),e({woocommerce_no_sales_tax:!0,woocommerce_calc_taxes:"no"}).then((function(){window.location=Object(E.f)("admin.php?page=wc-admin")}))}},{key:"getSteps",value:function(){var e,t,n=this,o=this.props,c=o.generalSettings,r=o.isJetpackConnected,a=o.isPending,i=o.tosAccepted,s=o.updateOptions,l=this.state.cachedPluginsToActivate;l.includes("woocommerce-services")?(e=Object(g.__)("Install Jetpack and WooCommerce Tax",'woocommerce'),t=Object(g.__)("By installing Jetpack and WooCommerce Tax you agree to the {{link}}Terms of Service{{/link}}.",'woocommerce')):(e=Object(g.__)("Install Jetpack",'woocommerce'),t=Object(g.__)("By installing Jetpack you agree to the {{link}}Terms of Service{{/link}}.",'woocommerce'));var u=[{key:"store_location",label:Object(g.__)("Set store location",'woocommerce'),description:Object(g.__)("The address from which your business operates",'woocommerce'),content:Object(_.createElement)(ke,ue()({},this.props,{onComplete:function(e){var t=Object(C.b)(e.countryState);Object(k.recordEvent)("tasklist_tax_set_location",{country:t}),n.completeStep()},isSettingsRequesting:!1,settings:c})),visible:!0},{key:"plugins",label:e,description:Object(g.__)("Jetpack and WooCommerce Tax allow you to automate sales tax calculations",'woocommerce'),content:Object(_.createElement)(_.Fragment,null,Object(_.createElement)(P.Plugins,{onComplete:function(e,t){Object(ne.a)(t),Object(k.recordEvent)("tasklist_tax_install_extensions",{install_extensions:!0}),s({woocommerce_setup_jetpack_opted_in:!0}),n.completeStep()},onError:function(e,t){return Object(ne.a)(t)},onSkip:function(){Object(k.queueRecordEvent)("tasklist_tax_install_extensions",{install_extensions:!1}),n.manuallyConfigureTaxRates()},skipText:Object(g.__)("Set up manually",'woocommerce'),onAbort:function(){return n.doNotChargeSalesTax()},abortText:Object(g.__)("I don't charge sales tax",'woocommerce')}),!i&&Object(_.createElement)(Ne.e,{variant:"caption",className:"woocommerce-task__caption"},pe()({mixedString:t,components:{link:Object(_.createElement)(P.Link,{href:"https://wordpress.com/tos/",target:"_blank",type:"external"})}}))),visible:(l.length||!i)&&this.isTaxJarSupported()},{key:"connect",label:Object(g.__)("Connect your store",'woocommerce'),description:Object(g.__)("Connect your store to WordPress.com to enable automated sales tax calculations",'woocommerce'),content:Object(_.createElement)(_e,ue()({},this.props,{onConnect:function(){Object(k.recordEvent)("tasklist_tax_connect_store",{connect:!0,no_tax:!1})},onSkip:function(){Object(k.queueRecordEvent)("tasklist_tax_connect_store",{connect:!1,no_tax:!1}),n.manuallyConfigureTaxRates()},skipText:Object(g.__)("Set up tax rates manually",'woocommerce'),onAbort:function(){return n.doNotChargeSalesTax()},abortText:Object(g.__)("My business doesn't charge sales tax",'woocommerce')})),visible:!r&&this.isTaxJarSupported()},{key:"manual_configuration",label:Object(g.__)("Configure tax rates",'woocommerce'),description:Object(g.__)("Head over to the tax rate settings screen to configure your tax rates",'woocommerce'),content:Object(_.createElement)(_.Fragment,null,Object(_.createElement)(j.Button,{disabled:a,isPrimary:!0,isBusy:a,onClick:function(){Object(k.recordEvent)("tasklist_tax_config_rates"),n.manuallyConfigureTaxRates()}},Object(g.__)("Configure",'woocommerce')),Object(_.createElement)("p",null,"yes"!==c.woocommerce_calc_taxes&&pe()({mixedString:Object(g.__)('By clicking "Configure" you\'re enabling tax rates and calculations. More info {{link}}here{{/link}}.','woocommerce'),components:{link:Object(_.createElement)(P.Link,{href:"https://docs.woocommerce.com/document/setting-up-taxes-in-woocommerce/#section-1",target:"_blank",type:"external"})}}))),visible:!this.isTaxJarSupported()}];return Object(w.filter)(u,(function(e){return e.visible}))}},{key:"renderSuccessScreen",value:function(){var e=this,t=this.props.isPending;return Object(_.createElement)("div",{className:"woocommerce-task-tax__success"},Object(_.createElement)("span",{className:"woocommerce-task-tax__success-icon",role:"img","aria-labelledby":"woocommerce-task-tax__success-message"},"🎊"),Object(_.createElement)(P.H,{id:"woocommerce-task-tax__success-message"},Object(g.__)("Good news!",'woocommerce')),Object(_.createElement)("p",null,pe()({mixedString:Object(g.__)("{{strong}}Jetpack{{/strong}} and {{strong}}WooCommerce Tax{{/strong}} can automate your sales tax calculations for you.",'woocommerce'),components:{strong:Object(_.createElement)("strong",null)}})),Object(_.createElement)(j.Button,{disabled:t,isPrimary:!0,isBusy:t,onClick:function(){Object(k.recordEvent)("tasklist_tax_setup_automated_proceed",{setup_automatically:!0}),e.updateAutomatedTax(!0)}},Object(g.__)("Yes please",'woocommerce')),Object(_.createElement)(j.Button,{disabled:t,isTertiary:!0,onClick:function(){Object(k.recordEvent)("tasklist_tax_setup_automated_proceed",{setup_automatically:!1}),e.updateAutomatedTax(!1)}},Object(g.__)("No thanks, I'll set up manually",'woocommerce')),Object(_.createElement)(j.Button,{disabled:t,isTertiary:!0,onClick:function(){return e.doNotChargeSalesTax()}},Object(g.__)("I don't charge sales tax",'woocommerce')))}},{key:"render",value:function(){var e=this.state.stepIndex,t=this.props,n=t.isPending,o=t.isResolving,c=this.getSteps()[e];return Object(_.createElement)("div",{className:"woocommerce-task-tax"},Object(_.createElement)(j.Card,{className:"woocommerce-task-card"},Object(_.createElement)(j.CardBody,null,this.shouldShowSuccessScreen()?this.renderSuccessScreen():Object(_.createElement)(P.Stepper,{isPending:n||o,isVertical:!0,currentStep:c.key,steps:this.getSteps()}))))}}]),o}(_.Component),Be=Object(O.compose)(Object(y.withSelect)((function(e){var t=e(v.SETTINGS_STORE_NAME),n=t.getSettings,o=t.isUpdateSettingsRequesting,c=e(v.OPTIONS_STORE_NAME).getOption,r=e(v.PLUGINS_STORE_NAME),a=r.getActivePlugins,i=r.isJetpackConnected,s=r.isPluginsRequesting,l=e(v.ONBOARDING_STORE_NAME).getTasksStatus,u=n("general").general,m=void 0===u?{}:u,p=Object(C.b)(m.woocommerce_default_country),d=m.woocommerce_store_address,h=m.woocommerce_default_country,b=m.woocommerce_store_postcode,f=Boolean(d&&h&&b),_=n("tax").tax,g=void 0===_?{}:_,O=a(),y=Object(w.difference)(["jetpack","woocommerce-services"],O),k=(c("wc_connect_options")||{}).tos_accepted||c("woocommerce_setup_jetpack_opted_in"),j=l(),S=o("tax")||o("general"),E=s("getJetpackConnectUrl");return{countryCode:p,generalSettings:m,hasCompleteAddress:f,isJetpackConnected:i(),isPending:S,isResolving:E,pluginsToActivate:y,tasksStatus:j,taxSettings:g,tosAccepted:k}})),Object(y.withDispatch)((function(e){var t=e("core/notices").createNotice,n=e(v.OPTIONS_STORE_NAME).updateOptions,o=e(v.SETTINGS_STORE_NAME).updateAndPersistSettingsForGroup,c=e(v.ONBOARDING_STORE_NAME).invalidateResolutionForStoreSelector;return{clearTaskStatusCache:function(){return c("getTasksStatus")},createNotice:t,updateAndPersistSettingsForGroup:o,updateOptions:n}})))(Me),De=n(15),Le=n.n(De),Fe=n(635);function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var c=h()(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return p()(this,n)}}function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve=function(){var e=D()(M.a.mark((function e(t,n,o){var c,r,a,i;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o.clearTaskStatusCache,r=o.updateOptions,a=o.options,(i=a[t]).enabled===n){e.next=6;break}return e.next=5,r(f()({},t,Ge(Ge({},i),{},{enabled:n})));case 5:c();case 6:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),He=function(e){u()(i,e);var t,n,o,r=ze(i);function i(e){var t;c()(this,i),t=r.apply(this,arguments);var n=e.methods,o={};return n.forEach((function(e){return o[e.key]=e.isEnabled})),t.state={busyMethod:null,enabledMethods:o,recommendedMethod:t.getRecommendedMethod()},t.markConfigured=t.markConfigured.bind(s()(t)),t}return a()(i,[{key:"componentDidUpdate",value:function(){var e=this.state.recommendedMethod,t=this.getRecommendedMethod();e!==t&&this.setState({recommendedMethod:t})}},{key:"getRecommendedMethod",value:function(){var e=this.props.methods.find((function(e){return"wcpay"===e.key&&e.visible||"mercadopago"===e.key&&e.visible}));return e?e.key:"stripe"}},{key:"markConfigured",value:(o=D()(M.a.mark((function e(t){var n,o,c,r,a=arguments;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},o=this.state.enabledMethods,c=this.props.methods,r=c.find((function(e){return e.key===t}))){e.next=6;break}throw"Method ".concat(t," not found in available methods list");case 6:return this.setState({enabledMethods:Ge(Ge({},o),{},f()({},t,!0))}),e.next=9,Ve(r.optionName,"yes",this.props);case 9:Object(k.recordEvent)("tasklist_payment_connect_method",{payment_method:t}),Object(F.getHistory)().push(Object(F.getNewPath)(Ge(Ge({},n),{},{task:"payments"}),"/",{}));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"getCurrentMethod",value:function(){var e=this.props,t=e.methods,n=e.query;if(n.method){var o=t.find((function(e){return e.key===n.method}));if(!o)throw"Current method ".concat(n.method," not found in available methods list");return o}}},{key:"getInstallStep",value:function(){var e=this.getCurrentMethod();if(e.plugins&&e.plugins.length){var t=this.props.activePlugins,n=e.plugins.filter((function(e){return!t.includes(e)})),o=e.plugins.map((function(e){return v.pluginNames[e]})).join(" "+Object(g.__)("and",'woocommerce')+" ");return{key:"install",label:Object(g.sprintf)(Object(g.__)("Install %s",'woocommerce'),o),content:Object(_.createElement)(P.Plugins,{onComplete:function(t,n){Object(ne.a)(n),Object(k.recordEvent)("tasklist_payment_install_method",{plugins:e.plugins})},onError:function(e,t){return Object(ne.a)(t)},autoInstall:!0,pluginSlugs:e.plugins}),isComplete:!n.length}}}},{key:"toggleMethod",value:(n=D()(M.a.mark((function e(t){var n,o,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.methods,o=this.state.enabledMethods,c=n.find((function(e){return e.key===t}))){e.next=5;break}throw"Method ".concat(t," not found in available methods list");case 5:return o[t]=!o[t],this.setState({enabledMethods:o}),Object(k.recordEvent)("tasklist_payment_toggle",{enabled:!c.isEnabled,payment_method:t}),e.next=10,Ve(c.optionName,c.isEnabled?"no":"yes",this.props);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"handleClick",value:(t=D()(M.a.mark((function e(t){var n,o,c,r=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.methods,o=t.key,c=t.onClick,Object(k.recordEvent)("tasklist_payment_setup",{options:n.map((function(e){return e.key})),selected:o}),!c){e.next=8;break}return this.setState({busyMethod:o}),e.next=7,new Promise(c).then((function(){r.setState({busyMethod:null})})).catch((function(){r.setState({busyMethod:null})}));case 7:return e.abrupt("return");case 8:Object(F.updateQueryString)({method:o});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getSetupButtons",value:function(e){var t=this,n=this.state,o=n.busyMethod,c=n.enabledMethods,r=n.recommendedMethod,a=e.container,i=e.isConfigured,s=e.key;return a&&!i?Object(_.createElement)("div",null,Object(_.createElement)(j.Button,{isPrimary:s===r,isSecondary:s!==r,isBusy:o===s,disabled:o,onClick:function(){return t.handleClick(e)}},Object(g.__)("Set up",'woocommerce'))):Object(_.createElement)(j.FormToggle,{checked:c[s],onChange:function(){return t.toggleMethod(s)},onClick:function(e){return e.stopPropagation()}})}},{key:"render",value:function(){var e=this,t=this.getCurrentMethod(),n=this.state.recommendedMethod,o=this.props,c=o.methods,r=o.query;return t?Object(_.createElement)(j.Card,{className:"woocommerce-task-payment-method woocommerce-task-card"},Object(_.createElement)(j.CardBody,null,Object(_.cloneElement)(t.container,{methodConfig:t,query:r,installStep:this.getInstallStep(),markConfigured:this.markConfigured,hasCbdIndustry:t.hasCbdIndustry}))):Object(_.createElement)("div",{className:"woocommerce-task-payments"},c.map((function(t){var o=t.before,c=t.content,r=t.isConfigured,a=t.key,i=t.title,s=t.visible,l=t.loading;if(!s)return null;var u=Le()("woocommerce-task-payment","woocommerce-task-card",!r&&"woocommerce-task-payment-not-configured","woocommerce-task-payment-"+a),m=a===n&&!r,p=m&&"wcpay"!==a,d=m&&"wcpay"===a,h="mercadopago"===a?Object(g.__)("Local Partner",'woocommerce'):Object(g.__)("Recommended",'woocommerce');return Object(_.createElement)(j.Card,{key:a,className:u},p&&Object(_.createElement)("div",{className:"woocommerce-task-payment__recommended-ribbon"},Object(_.createElement)("span",null,h)),Object(_.createElement)(j.CardMedia,{isBorderless:!0},o),Object(_.createElement)(j.CardBody,null,Object(_.createElement)(P.H,{className:"woocommerce-task-payment__title"},i,d&&Object(_.createElement)("span",{className:"woocommerce-task-payment__recommended-pill"},h)),Object(_.createElement)("div",{className:"woocommerce-task-payment__content"},c)),Object(_.createElement)(j.CardFooter,{isBorderless:!0},l?Object(_.createElement)(j.Spinner,null):e.getSetupButtons(t)))})))}}]),i}(_.Component),qe=Object(O.compose)(Object(y.withDispatch)((function(e){var t=e("core/notices").createNotice,n=e(v.PLUGINS_STORE_NAME),o=n.installAndActivatePlugins,c=n.invalidateResolutionForStoreSelector,r=e(v.OPTIONS_STORE_NAME).updateOptions,a=e(v.ONBOARDING_STORE_NAME),i=a.invalidateResolution,s=a.invalidateResolutionForStoreSelector;return i("getProfileItems",[]),i("getTasksStatus",[]),{clearTaskStatusCache:function(){s("getTasksStatus"),c("getPaypalOnboardingStatus")},createNotice:t,installAndActivatePlugins:o,updateOptions:r}})),Object(y.withSelect)((function(e,t){var n=t.createNotice,o=t.installAndActivatePlugins,c=e(v.ONBOARDING_STORE_NAME).getProfileItems,r=e(v.OPTIONS_STORE_NAME).getOption,a=e(v.PLUGINS_STORE_NAME),i=a.getActivePlugins,s=a.isJetpackConnected,l=a.getPaypalOnboardingStatus,u=a.hasFinishedResolution,m=(0,e(v.SETTINGS_STORE_NAME).getSettings)("general").general,p=void 0===m?{}:m,d=e(v.ONBOARDING_STORE_NAME).getTasksStatus,h=i(),b=d(),f=c(),_=["woocommerce_woocommerce_payments_settings","woocommerce_stripe_settings","woocommerce-ppcp-settings","woocommerce_ppcp-gateway_settings","woocommerce_payfast_settings","woocommerce_square_credit_card_settings","woocommerce_klarna_payments_settings","woocommerce_kco_settings","wc_square_refresh_tokens","woocommerce_cod_settings","woocommerce_bacs_settings","woocommerce_bacs_accounts","woocommerce_eway_settings","woocommerce_razorpay_settings","woocommerce_mollie_payments_settings","woocommerce_payubiz_settings","woocommerce_paystack_settings","woocommerce_woo-mercado-pago-basic_settings"].reduce((function(e,t){return e[t]=r(t),e}),{}),g=Object(C.b)(p.woocommerce_default_country),O=l();return{countryCode:g,profileItems:f,activePlugins:h,options:_,methods:Object(Fe.a)({activePlugins:h,countryCode:g,createNotice:n,installAndActivatePlugins:o,isJetpackConnected:s(),onboardingStatus:b,options:_,profileItems:f,paypalOnboardingStatus:O,loadingPaypalStatus:!u("getPaypalOnboardingStatus")&&!O})}})))(He),Je=n(615),We=n(619);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Qe(e,t,n,o){Object(k.recordEvent)("task_view",{task_name:e,wcs_installed:o.includes("woocommerce-services"),wcs_active:n.includes("woocommerce-services"),jetpack_installed:o.includes("jetpack"),jetpack_active:n.includes("jetpack"),jetpack_connected:t})}function Ye(e){var t=e.activePlugins,n=e.countryCode,o=e.createNotice,c=e.installAndActivatePlugins,r=e.installedPlugins,a=e.isJetpackConnected,i=e.onboardingStatus,s=e.profileItems,l=e.query,u=e.toggleCartModal,m=e.onTaskSelect,p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({hasPaymentGateway:!1,hasPhysicalProducts:!1,hasProducts:!1,isAppearanceComplete:!1,isTaxComplete:!1,shippingZonesCount:0,wcPayIsConnected:!1},i),d=p.hasPaymentGateway,h=p.hasPhysicalProducts,b=p.hasProducts,O=p.isAppearanceComplete,y=p.isTaxComplete,v=p.shippingZonesCount,k=p.wcPayIsConnected,j=Object(C.a)(s,r),w=j.products,S=j.remainingProducts,E=j.uniqueItemsList,P=-1!==r.indexOf("woocommerce-payments"),T=s.completed,x=s.product_types,N=(s.business_extensions||[]).includes("woocommerce-payments"),R=Object(g.__)("Add paid extensions to your store",'woocommerce');if(1===E.length){var A=E[0].name,I=Object(g.__)("Add %s to your store",'woocommerce');R=Object(g.sprintf)(I,A)}var B,z=[{key:"store_details",title:Object(g.__)("Store details",'woocommerce'),container:null,onClick:function(){m("store_details"),Object(F.getHistory)().push(Object(F.getNewPath)({},"/setup-wizard",{}))},completed:T,visible:!0,time:Object(g.__)("4 minutes",'woocommerce'),type:"setup"},{key:"purchase",title:R,container:null,onClick:function(){return m("purchase"),S.length?u():null},visible:w.length,completed:w.length&&!S.length,time:Object(g.__)("2 minutes",'woocommerce'),isDismissable:!0,type:"setup"},{key:"products",title:Object(g.__)("Add products",'woocommerce'),container:Object(_.createElement)(se,null),onClick:function(){m("products"),Object(F.updateQueryString)({task:"products"})},completed:b,visible:!0,time:Object(g.__)("1 minute per product",'woocommerce'),type:"setup"},{key:"woocommerce-payments",title:Object(g.__)("Set up WooCommerce Payments",'woocommerce'),container:Object(_.createElement)(_.Fragment,null),completed:k,onClick:(B=D()(M.a.mark((function e(n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("A"!==n.target.nodeName){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,new Promise((function(e,n){return Qe("wcpay",a,t,r),m("woocommerce-payments"),Object(Je.c)(n,o,c)}));case 4:case"end":return e.stop()}}),e)}))),function(e){return B.apply(this,arguments)}),visible:window.wcAdminFeatures.wcpay&&N&&P&&Object(Je.d)(n),additionalInfo:Object(g.__)('By setting up, you are agreeing to the <a href="https://wordpress.com/tos/" target="_blank">Terms of Service</a>','woocommerce'),time:Object(g.__)("2 minutes",'woocommerce'),type:"setup"},{key:"payments",title:Object(g.__)("Choose payment methods",'woocommerce'),container:Object(_.createElement)(qe,null),completed:d,onClick:function(){m("payments"),Object(F.updateQueryString)({task:"payments"})},visible:!P||!N||!Object(Je.d)(n),time:Object(g.__)("2 minutes",'woocommerce'),type:"setup"},{key:"tax",title:Object(g.__)("Add tax rates",'woocommerce'),container:Object(_.createElement)(Be,null),onClick:function(){m("tax"),Object(F.updateQueryString)({task:"tax"})},completed:y,visible:!0,time:Object(g.__)("1 minute",'woocommerce'),type:"setup"},{key:"shipping",title:Object(g.__)("Set up shipping costs",'woocommerce'),container:Object(_.createElement)(xe,null),onClick:function(){m("shipping"),Object(F.updateQueryString)({task:"shipping"})},completed:v>0,visible:x&&x.includes("physical")||h,time:Object(g.__)("1 minute",'woocommerce'),type:"setup"},{key:"appearance",title:Object(g.__)("Personalize your store",'woocommerce'),container:Object(_.createElement)(J,null),onClick:function(){m("appearance"),Object(F.updateQueryString)({task:"appearance"})},completed:O,visible:!0,time:Object(g.__)("2 minutes",'woocommerce'),type:"setup"}];return Object(We.a)(Object(L.applyFilters)("woocommerce_admin_onboarding_task_list",z,l),"type","extension")}var Ke=n(44),$e=n.n(Ke),Xe=(n(248),Object(_.createElement)(Y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(_.createElement)(Y.Path,{d:"M18.3 5.6L9.9 16.9l-4.6-3.4-.9 1.2 5.8 4.3 9.3-12.6z"})));function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var c=h()(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return p()(this,n)}}var ot=function(e){u()(n,e);var t=nt(n);function n(){return c()(this,n),t.apply(this,arguments)}return a()(n,[{key:"componentDidMount",value:function(){this.recordTaskView(),this.recordTaskListView(),this.possiblyCompleteTaskList(),this.possiblyTrackCompletedTasks()}},{key:"componentDidUpdate",value:function(e){var t=this.props.query;e.query.task!==t.task&&(window.document.documentElement.scrollTop=0,this.recordTaskView()),this.possiblyCompleteTaskList(),this.possiblyTrackCompletedTasks()}},{key:"possiblyCompleteTaskList",value:function(){var e=this.props,t=e.isComplete,n=e.name,o=void 0===n?"task_list":n,c=e.updateOptions,r="woocommerce_".concat(o,"_complete"),a=t?f()({},r,"no"):f()({},r,"yes");"task_list"===o&&(a.woocommerce_default_homepage_layout="two_columns"),(!this.getIncompleteTasks().length&&!t||this.getIncompleteTasks().length&&t)&&c(tt({},a))}},{key:"getCompletedTaskKeys",value:function(){return this.getVisibleTasks().filter((function(e){return e.completed})).map((function(e){return e.key}))}},{key:"getIncompleteTasks",value:function(){var e=this.props,t=e.dismissedTasks;return e.tasks.filter((function(e){return e.visible&&!e.completed&&!t.includes(e.key)}))}},{key:"shouldUpdateCompletedTasks",value:function(e,t,n){return t.length>0||0!==n.length&&!n.every((function(t){return e.indexOf(t)>=0}))}},{key:"getTrackedCompletedTasks",value:function(e,t){return t?e.filter((function(e){return t.includes(e)})):[]}},{key:"getTrackedIncompletedTasks",value:function(e,t){return this.getVisibleTasks().filter((function(n){return t.includes(n.key)&&!e.includes(n.key)})).map((function(e){return e.key}))}},{key:"getTasksForUpdate",value:function(e,t,n){return $e()(new Set([].concat($e()(e),$e()(t)))).filter((function(e){return!n.includes(e)}))}},{key:"possiblyTrackCompletedTasks",value:function(){var e=this.props,t=e.trackedCompletedTasks,n=e.updateOptions,o=this.getCompletedTaskKeys(),c=this.getTrackedCompletedTasks(o,t),r=this.getTrackedIncompletedTasks(c,t);this.shouldUpdateCompletedTasks(c,r,o)&&n({woocommerce_task_list_tracked_completed_tasks:this.getTasksForUpdate(o,t,r)})}},{key:"dismissTask",value:function(e){var t=this,n=e.key,o=e.onDismiss,c=this.props,r=c.createNotice,a=c.dismissedTasks,i=c.updateOptions;r("success",Object(g.__)("Task dismissed"),{actions:[{label:Object(g.__)("Undo",'woocommerce'),onClick:function(){return t.undoDismissTask(n)}}]}),Object(k.recordEvent)("tasklist_dismiss_task",{task_name:n}),i({woocommerce_task_list_dismissed_tasks:[].concat($e()(a),[n])}),o&&o()}},{key:"undoDismissTask",value:function(e){var t=this.props,n=t.dismissedTasks;(0,t.updateOptions)({woocommerce_task_list_dismissed_tasks:n.filter((function(t){return t!==e}))})}},{key:"getVisibleTasks",value:function(){var e=this.props,t=e.dismissedTasks;return e.tasks.filter((function(e){return e.visible&&!t.includes(e.key)}))}},{key:"recordTaskView",value:function(){var e=this.props,t=e.isJetpackConnected,n=e.activePlugins,o=e.installedPlugins,c=e.query.task;c&&Qe(c,t,n,o)}},{key:"recordTaskListView",value:function(){if(!this.getCurrentTask()){var e=this.props.profileItems,t=this.getVisibleTasks();Object(k.recordEvent)("tasklist_view",{number_tasks:t.length,store_connected:e.wccom_connected})}}},{key:"hideTaskCard",value:function(e){var t=this.props,n=t.name,o=void 0===n?"task_list":n,c=t.updateOptions,r="task_list"===o,a=r?"tasklist":"extended_tasklist",i=f()({},"woocommerce_".concat(o,"_hidden"),"yes");r&&(i.woocommerce_task_list_prompt_shown=!0,i.woocommerce_default_homepage_layout="two_columns"),Object(k.recordEvent)("".concat(a,"_completed"),{action:e,completed_task_count:this.getCompletedTaskKeys().length,incomplete_task_count:this.getIncompleteTasks().length}),c(tt({},i))}},{key:"getCurrentTask",value:function(){var e=this.props,t=e.query,n=e.tasks,o=t.task,c=n.find((function(e){return e.key===o}));return c||null}},{key:"renderMenu",value:function(){var e=this;return Object(_.createElement)("div",{className:"woocommerce-card__menu woocommerce-card__header-item"},Object(_.createElement)(P.EllipsisMenu,{label:Object(g.__)("Task List Options",'woocommerce'),renderContent:function(){return Object(_.createElement)("div",{className:"woocommerce-task-card__section-controls"},Object(_.createElement)(j.Button,{onClick:function(){return e.hideTaskCard("remove_card")}},Object(g.__)("Hide this",'woocommerce')))}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,o=t.query,c=t.title,r=o.task,a=this.getCurrentTask();if(r&&!a)return null;var i=this.getVisibleTasks().map((function(t){return t.className=Le()(t.completed?"is-complete":null,t.className),t.before=Object(_.createElement)("div",{className:"woocommerce-task__icon"},t.completed&&Object(_.createElement)(Q.a,{icon:Xe})),t.title=Object(_.createElement)(Ne.e,{as:"div",variant:t.completed?"body.small":"button"},t.title,t.additionalInfo&&Object(_.createElement)("div",{className:"woocommerce-task__additional-info",dangerouslySetInnerHTML:Object(T.a)(t.additionalInfo)}),t.time&&!t.completed&&Object(_.createElement)("div",{className:"woocommerce-task__estimated-time"},t.time)),!t.completed&&t.isDismissable&&(t.after=Object(_.createElement)(j.Button,{"data-testid":"".concat(t.key,"-dismiss-button"),isTertiary:!0,onClick:function(n){n.stopPropagation(),e.dismissTask(t)}},Object(g.__)("Dismiss",'woocommerce'))),t.onClick||(t.onClick=function(e){if("A"===e.target.nodeName)return!1;Object(F.updateQueryString)({task:t.key})}),t}));return i.length?Object(_.createElement)(_.Fragment,null,Object(_.createElement)("div",{className:"woocommerce-task-dashboard__container"},a?Object(_.cloneElement)(a.container,{query:o}):Object(_.createElement)(_.Fragment,null,Object(_.createElement)(j.Card,{size:"large",className:"woocommerce-task-card woocommerce-homescreen-card"},Object(_.createElement)(j.CardHeader,{size:"medium"},Object(_.createElement)("div",{className:"wooocommerce-task-card__header"},Object(_.createElement)(Ne.e,{variant:"title.small"},c),Object(_.createElement)(P.Badge,{count:this.getIncompleteTasks().length})),this.renderMenu(!n)),Object(_.createElement)(j.CardBody,null,Object(_.createElement)(P.List,{items:i})))))):Object(_.createElement)("div",{className:"woocommerce-task-dashboard__container"})}}]),n}(_.Component),ct=Object(O.compose)(Object(y.withSelect)((function(e){var t=e(v.ONBOARDING_STORE_NAME),n=t.getProfileItems,o=t.getTasksStatus,c=e(v.SETTINGS_STORE_NAME).getSettings,r=e(v.PLUGINS_STORE_NAME),a=r.getActivePlugins,i=r.getInstalledPlugins,s=r.isJetpackConnected,l=n(),u=c("general").general,m=void 0===u?{}:u,p=Object(C.b)(m.woocommerce_default_country),d=a(),h=i(),b=o();return{activePlugins:d,countryCode:p,isJetpackConnected:s(),installedPlugins:h,onboardingStatus:b,profileItems:l}})),Object(y.withDispatch)((function(e){var t=e("core/notices").createNotice,n=e(v.OPTIONS_STORE_NAME).updateOptions;return{createNotice:t,installAndActivatePlugins:e(v.PLUGINS_STORE_NAME).installAndActivatePlugins,updateOptions:n}})))(ot);function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function it(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var c=h()(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return p()(this,n)}}var st=function(e){u()(n,e);var t=it(n);function n(e){var o;return c()(this,n),o=t.call(this,e),f()(s()(o),"getTaskStartedCount",(function(e){var t=o.props.userPreferences.task_list_tracked_started_tasks;return t&&t[e]?t[e]:0})),f()(s()(o),"updateTrackStartedCount",(function(e,t){var n=o.props.userPreferences,c=n.task_list_tracked_started_tasks||{};n.updateUserPreferences({task_list_tracked_started_tasks:at(at({},c||{}),{},f()({},e,t))})})),f()(s()(o),"isTaskCompleted",(function(e){var t=o.props.trackedCompletedTasks;return!!t&&t.includes(e)})),f()(s()(o),"onTaskSelect",(function(e){var t=o.getTaskStartedCount(e);Object(k.recordEvent)("tasklist_click",{task_name:e}),o.isTaskCompleted(e)||o.updateTrackStartedCount(e,t+1)})),o.state={isCartModalOpen:!1},o}return a()(n,[{key:"componentDidMount",value:function(){document.body.classList.add("woocommerce-onboarding"),document.body.classList.add("woocommerce-task-dashboard__body")}},{key:"getAllTasks",value:function(){var e=this.props;return Ye({activePlugins:e.activePlugins,countryCode:e.countryCode,createNotice:e.createNotice,installAndActivatePlugins:e.installAndActivatePlugins,installedPlugins:e.installedPlugins,isJetpackConnected:e.isJetpackConnected,onboardingStatus:e.onboardingStatus,profileItems:e.profileItems,query:e.query,toggleCartModal:this.toggleCartModal.bind(this),onTaskSelect:this.onTaskSelect})}},{key:"toggleCartModal",value:function(){var e=this.state.isCartModalOpen;e||Object(k.recordEvent)("tasklist_purchase_extensions"),this.setState({isCartModalOpen:!e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dismissedTasks,o=t.isExtendedTaskListComplete,c=t.isExtendedTaskListHidden,r=t.isSetupTaskListHidden,a=t.isTaskListComplete,i=t.query,s=t.trackedCompletedTasks,l=this.state.isCartModalOpen,u=this.getAllTasks(),m=u.extension,p=u.setup,d=i.task;return Object(_.createElement)(_.Fragment,null,p&&(!r||d)&&Object(_.createElement)(ct,{dismissedTasks:n||[],isComplete:a,query:i,tasks:p,title:Object(g.__)("Get ready to start selling",'woocommerce'),trackedCompletedTasks:s||[]}),m&&!c&&Object(_.createElement)(ct,{dismissedTasks:n||[],isComplete:o,name:"extended_task_list",query:i,tasks:m,title:Object(g.__)("Extensions setup",'woocommerce'),trackedCompletedTasks:s||[]}),l&&Object(_.createElement)(A,{onClose:function(){return e.toggleCartModal()},onClickPurchaseLater:function(){return e.toggleCartModal()}}))}}]),n}(_.Component);t.default=Object(O.compose)(Object(y.withSelect)((function(e){var t=e(v.ONBOARDING_STORE_NAME),n=t.getProfileItems,o=t.getTasksStatus,c=e(v.SETTINGS_STORE_NAME).getSettings,r=e(v.OPTIONS_STORE_NAME).getOption,a=e(v.PLUGINS_STORE_NAME),i=a.getActivePlugins,s=a.getInstalledPlugins,l=a.isJetpackConnected,u=n(),m=r("woocommerce_task_list_tracked_completed_tasks")||[],p=c("general").general,d=void 0===p?{}:p,h=Object(C.b)(d.woocommerce_default_country),b=i(),f=s(),_=o();return{activePlugins:b,countryCode:h,dismissedTasks:r("woocommerce_task_list_dismissed_tasks"),isExtendedTaskListComplete:"yes"===r("woocommerce_extended_task_list_complete"),isExtendedTaskListHidden:"yes"===r("woocommerce_extended_task_list_hidden"),isJetpackConnected:l(),isSetupTaskListHidden:"yes"===r("woocommerce_task_list_hidden"),isTaskListComplete:"yes"===r("woocommerce_task_list_complete"),installedPlugins:f,onboardingStatus:_,profileItems:u,trackedCompletedTasks:m}})),Object(y.withDispatch)((function(e){return{createNotice:e("core/notices").createNotice,installAndActivatePlugins:e(v.PLUGINS_STORE_NAME).installAndActivatePlugins}})))(st)}}]);